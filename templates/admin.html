<!doctype html>
<html lang="en">
    <head>
        {% block head %} {% include 'includes/head.html' %} {% endblock %}
        <script src="/static/js/admin.js"></script>
    </head>

    <body class="bg-base text-text">
        {% block navbar %} {% include 'includes/navbar.html' %} {% endblock %}
        <div class="mx-auto mt-16 h-[calc(100vh-64px)] max-w-7xl items-center justify-center">
            <h1 class="mb-5 pt-16 text-center text-3xl font-bold text-text">{{ tab_name }}</h1>
            <div class="mb-7 flex justify-center space-x-1.5">
                <a
                    href="/admin?tab=users"
                    class="w-36 rounded-md bg-mauve px-4 py-2 text-center font-semibold text-crust transition-opacity hover:opacity-80"
                    >Users</a
                >
                <!-- <a
                    href="/admin?tab=appointments"
                    class="w-36 rounded-md bg-mauve px-4 py-2 text-center font-semibold text-crust transition-opacity hover:opacity-80"
                    >Appointments</a
                >
                <a
                    href="/admin?tab=queue"
                    class="w-36 rounded-md bg-mauve px-4 py-2 text-center font-semibold text-crust transition-opacity hover:opacity-80"
                    >Queue</a
                > -->
                <a
                    href="/admin?tab=shop"
                    class="w-36 rounded-md bg-mauve px-4 py-2 text-center font-semibold text-crust transition-opacity hover:opacity-80"
                    >Shop</a
                >
                <!-- <a
                    href="/admin?tab=carts"
                    class="w-36 rounded-md bg-mauve px-4 py-2 text-center font-semibold text-crust transition-opacity hover:opacity-80"
                    >Carts</a
                > -->
                <a
                    href="/admin?tab=orders"
                    class="w-36 rounded-md bg-mauve px-4 py-2 text-center font-semibold text-crust transition-opacity hover:opacity-80"
                    >Orders</a
                >
            </div>
            <div class="{{ 'hidden' if tab != 'users' }} mb-8 rounded-lg bg-surface0 p-6 shadow-md">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold text-text">Users</h2>
                    <button
                        id="new-user"
                        class="rounded-md bg-blue px-4 py-2 font-semibold text-crust transition-opacity duration-300 hover:opacity-80">
                        Add New User
                    </button>
                </div>
                <table class="mt-4 w-full">
                    <thead>
                        <tr>
                            <th class="text-left">ID</th>
                            <th class="text-left">Name</th>
                            <th class="text-left">Phone</th>
                            <th class="text-left">Email</th>
                            <th class="text-left">NRIC</th>
                            <th class="text-left">Role</th>
                            <th class="text-left">Registered</th>
                            <th class="text-left">Active</th>
                            <th class="text-left">Admin</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in a_users %}
                        <tr
                            class="manage-user cursor-pointer border-y border-subtext0 transition-colors hover:bg-surface1"
                            data-id="{{ user._id }}"
                            data-phone="{{ user.phone }}"
                            data-first_name="{{ user.first_name }}"
                            data-last_name="{{ user.last_name }}"
                            data-email="{{ user.email }}"
                            data-gender="{{ user.gender }}"
                            data-nric="{{ user.nric }}"
                            data-role="{{ user.role }}"
                            data-admin="{{ 'true' if user.admin else 'false' }}"
                            data-registered="{{ 'true' if user.registered else 'false' }}"
                            data-active="{{ 'true' if user.active else 'false' }}"
                            data-address1="{{ user.address1 }}"
                            data-address2="{{ user.address2 }}"
                            data-address3="{{ user.address3 or '' }}"
                            data-address4="{{ user.address4 }}">
                            <td class="py-1"><code>{{ user._id }}</code></td>
                            <td class="py-1">{{ user.first_name }} {{ user.last_name }}</td>
                            <td class="py-1">{{ user.phone }}</td>
                            <td class="py-1">{{ user.email }}</td>
                            <td class="py-1">{{ user.nric }}</td>
                            <td class="py-1">{{ user.role|capitalize() }}</td>
                            <td class="py-1">{{ "Yes" if user.registered else "No" }}</td>
                            <td class="py-1">{{ "Yes" if user.active else "No" }}</td>
                            <td class="py-1">{{ "Yes" if user.admin else "No" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div
                class="fixed inset-0 z-20 hidden items-center justify-center bg-black bg-opacity-50"
                id="manageUserPopup">
                <div class="max-h-[90vh] w-full max-w-2xl overflow-auto rounded-lg bg-surface0 p-8 shadow-md">
                    <h2 class="mb-6 text-center text-2xl font-bold text-blue">Manage User</h2>
                    <form id="manage-user-form" class="space-y-4">
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div class="relative">
                                <input
                                    id="firstName"
                                    name="firstName"
                                    type="text"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    placeholder=" "
                                    required />
                                <label
                                    for="firstName"
                                    class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                    First Name
                                </label>
                            </div>
                            <div class="relative">
                                <input
                                    id="lastName"
                                    name="lastName"
                                    type="text"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    placeholder=" "
                                    required />
                                <label
                                    for="lastName"
                                    class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                    Last Name
                                </label>
                            </div>
                        </div>
                        <div class="relative">
                            <input
                                id="email"
                                name="email"
                                type="email"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="email"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Email
                            </label>
                        </div>
                        <div class="relative">
                            <select
                                id="gender"
                                name="gender"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                required>
                                <option value="" disabled selected></option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                            <label
                                for="gender"
                                class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                Gender
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="nric"
                                name="nric"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required
                                minlength="9"
                                maxlength="9" />
                            <label
                                for="nric"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                NRIC
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="addressLine1"
                                name="addressLine1"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="addressLine1"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 1
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="addressLine2"
                                name="addressLine2"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="addressLine2"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 2
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="addressLine3"
                                name="addressLine3"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" " />
                            <label
                                for="addressLine3"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 3 (optional)
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="postalCode"
                                name="postalCode"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required
                                pattern="[0-9]{6}"
                                minlength="6"
                                maxlength="6" />
                            <label
                                for="postalCode"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Postal Code
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="phone"
                                name="phone"
                                type="tel"
                                pattern="[0-9]{8}"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="phone"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Phone Number
                            </label>
                        </div>
                        <div class="flex space-x-4">
                            <div class="relative w-full">
                                <select
                                    id="role"
                                    name="role"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled selected></option>
                                    <option value="patient">Patient</option>
                                    <option value="doctor">Doctor</option>
                                </select>
                                <label
                                    for="role"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Role
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="registered"
                                    name="registered"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled selected></option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="registered"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Registered
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="active"
                                    name="active"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled selected></option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="active"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Active
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="admin"
                                    name="admin"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled selected></option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="admin"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Admin
                                </label>
                            </div>
                        </div>
                        <div class="flex space-x-4">
                            <button
                                type="button"
                                id="deleteUser"
                                class="w-full rounded-md bg-peach px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Delete Account
                            </button>
                            <button
                                id="saveUser"
                                type="submit"
                                class="w-full rounded-md bg-mauve px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Save Changes
                            </button>
                            <button
                                type="button"
                                id="manageUserCancel"
                                class="w-full rounded-md bg-red px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="fixed inset-0 z-20 hidden items-center justify-center bg-black bg-opacity-50" id="newUserPopup">
                <div class="max-h-[90vh] w-full max-w-2xl overflow-auto rounded-lg bg-surface0 p-8 shadow-md">
                    <h2 class="mb-6 text-center text-2xl font-bold text-blue">Add New User</h2>
                    <form id="new-user-form" class="space-y-4">
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div class="relative">
                                <input
                                    id="newFirstName"
                                    name="newFirstName"
                                    type="text"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    placeholder=" "
                                    required />
                                <label
                                    for="newFirstName"
                                    class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                    First Name
                                </label>
                            </div>
                            <div class="relative">
                                <input
                                    id="newLastName"
                                    name="newLastName"
                                    type="text"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    placeholder=" "
                                    required />
                                <label
                                    for="newLastName"
                                    class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                    Last Name
                                </label>
                            </div>
                        </div>
                        <div class="relative">
                            <input
                                id="newEmail"
                                name="newEmail"
                                type="email"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newEmail"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Email
                            </label>
                        </div>
                        <div class="relative">
                            <select
                                id="newGender"
                                name="newGender"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                required>
                                <option value="" disabled selected></option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                            <label
                                for="newGender"
                                class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                Gender
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newNric"
                                name="newNric"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required
                                minlength="9"
                                maxlength="9" />
                            <label
                                for="newNric"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                NRIC
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newAddressLine1"
                                name="newAddressLine1"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newAddressLine1"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 1
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newAddressLine2"
                                name="newAddressLine2"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newAddressLine2"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 2
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newAddressLine3"
                                name="newAddressLine3"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" " />
                            <label
                                for="newAddressLine3"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 3 (optional)
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newPostalCode"
                                name="newPostalCode"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required
                                pattern="[0-9]{6}"
                                minlength="6"
                                maxlength="6" />
                            <label
                                for="newPostalCode"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Postal Code
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newPhone"
                                name="newPhone"
                                type="tel"
                                pattern="[0-9]{8}"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newPhone"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Phone Number
                            </label>
                        </div>
                        <div class="flex space-x-4">
                            <div class="relative w-full">
                                <select
                                    id="newRole"
                                    name="newRole"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled></option>
                                    <option value="patient" selected>Patient</option>
                                    <option value="doctor">Doctor</option>
                                </select>
                                <label
                                    for="newRole"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Role
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="newRegistered"
                                    name="newRegistered"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled></option>
                                    <option value="true" selected>Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="newRegistered"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Registered
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="newActive"
                                    name="newActive"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled></option>
                                    <option value="true" selected>Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="newActive"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Active
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="newAdmin"
                                    name="newAdmin"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled></option>
                                    <option value="true">Yes</option>
                                    <option value="false" selected>No</option>
                                </select>
                                <label
                                    for="newAdmin"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Admin
                                </label>
                            </div>
                        </div>
                        <div class="flex space-x-4">
                            <button
                                id="newUser"
                                type="submit"
                                class="w-full rounded-md bg-mauve px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Add User
                            </button>
                            <button
                                type="button"
                                id="newUserCancel"
                                class="w-full rounded-md bg-red px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="{{ 'hidden' if tab != 'shop' }} mb-8 rounded-lg bg-surface0 p-6 shadow-md">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold text-text">Shop Items</h2>
                    <button
                        id="new-item"
                        class="rounded-md bg-blue px-4 py-2 font-semibold text-crust transition-opacity duration-300 hover:opacity-80">
                        Add New Item
                    </button>
                </div>
                <table class="mt-4 w-full">
                    <thead>
                        <tr>
                            <th class="text-left">Image</th>
                            <th class="text-left">ID</th>
                            <th class="text-left">Name</th>
                            <th class="text-left">Price</th>
                            <th class="text-left">Visible</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in a_shop %}
                        <tr
                            class="modify-item cursor-pointer border-y border-subtext0 transition-colors hover:bg-surface1"
                            data-id="{{ item._id }}"
                            data-name="{{ item.name }}"
                            data-price="{{ '%.2f'|format(item.price) }}"
                            data-visible="{{ 'true' if item.visible else 'false' }}"
                            data-image="{{ item.image }}">
                            <td class="py-1"><img src="{{ item.image }}" class="max-w-28" /></td>
                            <td class="py-1"><code>{{ item._id }}</code></td>
                            <td class="py-1">{{ item.name }}</td>
                            <td class="py-1">S${{ "%.2f"|format(item.price) }}</td>
                            <td class="py-1">{{ "Yes" if item.visible else "No" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div
                class="fixed inset-0 z-20 hidden items-center justify-center bg-black bg-opacity-50"
                id="modifyItemPopup">
                <div class="max-h-[90vh] w-full max-w-2xl overflow-auto rounded-lg bg-surface0 p-8 shadow-md">
                    <h2 class="mb-6 text-center text-2xl font-bold text-blue">Modify Item</h2>
                    <form id="modify-item-form" class="space-y-4">
                        <div class="relative">
                            <input
                                id="itemName"
                                name="itemName"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="itemName"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Name
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="itemPrice"
                                name="itemPrice"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="itemPrice"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Price
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="itemImage"
                                name="itemImage"
                                type="url"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="itemImage"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Image URL
                            </label>
                        </div>
                        <div class="relative">
                            <select
                                id="itemVisible"
                                name="itemVisible"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                required>
                                <option value="" disabled selected></option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                            <label
                                for="itemVisible"
                                class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                Visible
                            </label>
                        </div>
                        <div class="flex space-x-4">
                            <button
                                type="button"
                                id="deleteItem"
                                class="w-full rounded-md bg-peach px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Delete Item
                            </button>
                            <button
                                id="saveItem"
                                type="submit"
                                class="w-full rounded-md bg-mauve px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Save Changes
                            </button>
                            <button
                                type="button"
                                id="modifyItemCancel"
                                class="w-full rounded-md bg-red px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="fixed inset-0 z-20 hidden items-center justify-center bg-black bg-opacity-50" id="newItemPopup">
                <div class="max-h-[90vh] w-full max-w-2xl overflow-auto rounded-lg bg-surface0 p-8 shadow-md">
                    <h2 class="mb-6 text-center text-2xl font-bold text-blue">Add New Item</h2>
                    <form id="new-item-form" class="space-y-4">
                        <div class="relative">
                            <input
                                id="newItemName"
                                name="newItemName"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newItemName"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Name
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newItemPrice"
                                name="newItemPrice"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newItemPrice"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Price
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="newItemImage"
                                name="newItemImage"
                                type="url"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="newItemImage"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Image URL
                            </label>
                        </div>
                        <div class="relative">
                            <select
                                id="newItemVisible"
                                name="newItemVisible"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                required>
                                <option value="" disabled></option>
                                <option value="true" selected>Yes</option>
                                <option value="false">No</option>
                            </select>
                            <label
                                for="newItemVisible"
                                class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                Visible
                            </label>
                        </div>
                        <div class="flex space-x-4">
                            <button
                                id="newItem"
                                type="submit"
                                class="w-full rounded-md bg-mauve px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Add Item
                            </button>
                            <button
                                type="button"
                                id="newItemCancel"
                                class="w-full rounded-md bg-red px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="{{ 'hidden' if tab != 'orders' }} mb-8 rounded-lg bg-surface0 p-6 shadow-md">
                <h2 class="text-xl font-semibold text-text">Orders</h2>
                <table class="mt-4 w-full">
                    <thead>
                        <tr>
                            <th class="text-left">Order ID</th>
                            <th class="text-left">Ship To</th>
                            <th class="text-left">Items</th>
                            <th class="text-left">Total</th>
                            <th class="text-left">Paid</th>
                            <th class="text-left">Fulfilled</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in a_orders %}
                        <tr
                            class="manage-order cursor-pointer border-y border-subtext0 transition-colors hover:bg-surface1"
                            data-id="{{ order._id }}"
                            data-shipping-first_name="{{ order.shipping.first_name or '' }}"
                            data-shipping-last_name="{{ order.shipping.last_name or '' }}"
                            data-shipping-email="{{ order.shipping.email or '' }}"
                            data-shipping-phone="{{ order.shipping.phone or '' }}"
                            data-shipping-address1="{{ order.shipping.address1 or '' }}"
                            data-shipping-address2="{{ order.shipping.address2 or '' }}"
                            data-shipping-address3="{{ order.shipping.address3 or '' }}"
                            data-shipping-address4="{{ order.shipping.address4 or '' }}"
                            data-paid="{{ 'true' if order.paid else 'false' }}"
                            data-fulfilled="{{ 'true' if order.fulfilled else 'false' }}">
                            <td class="py-1"><code>{{ order._id }}</code></td>
                            <td class="py-1">
                                {{ order.shipping.first_name or '' }} {{ order.shipping.last_name or '' }}
                            </td>
                            <td class="py-1">
                                <ul>
                                    {% for item in order["items"] %}
                                    <li>
                                        {{ item.info.name }} - S${{ "%.2f"|format(item.info.price) }} x {{ item.quantity
                                        }}
                                    </li>
                                    {% endfor %}
                                </ul>
                            </td>
                            <td class="py-1">S${{ "%.2f"|format(order.total) }}</td>
                            <td class="py-1">{{ "Yes" if order.paid else "No" }}</td>
                            <td class="py-1">{{ "Yes" if order.fulfilled else "No" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div
                class="fixed inset-0 z-20 hidden items-center justify-center bg-black bg-opacity-50"
                id="manageOrderPopup">
                <div class="max-h-[90vh] w-full max-w-2xl overflow-auto rounded-lg bg-surface0 p-8 shadow-md">
                    <h2 class="mb-6 text-center text-2xl font-bold text-blue">Edit Order Attributes</h2>
                    <form id="manage-order-form" class="space-y-4">
                        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <div class="relative">
                                <input
                                    id="shippingFirstName"
                                    name="shippingFirstName"
                                    type="text"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    placeholder=" "
                                    required />
                                <label
                                    for="shippingFirstName"
                                    class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                    First Name
                                </label>
                            </div>
                            <div class="relative">
                                <input
                                    id="shippingLastName"
                                    name="shippingLastName"
                                    type="text"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    placeholder=" "
                                    required />
                                <label
                                    for="shippingLastName"
                                    class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                    Last Name
                                </label>
                            </div>
                        </div>
                        <div class="relative">
                            <input
                                id="shippingEmail"
                                name="shippingEmail"
                                type="email"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="shippingEmail"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Email
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="shippingPhone"
                                name="shippingPhone"
                                type="tel"
                                pattern="[0-9]{8}"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="shippingPhone"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Phone Number
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="shippingAddress1"
                                name="shippingAddress1"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="shippingAddress1"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 1
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="shippingAddress2"
                                name="shippingAddress2"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                required />
                            <label
                                for="shippingAddress2"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 2
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="shippingAddress3"
                                name="shippingAddress3"
                                type="text"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" " />
                            <label
                                for="shippingAddress3"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Address Line 3
                            </label>
                        </div>
                        <div class="relative">
                            <input
                                id="shippingPostalCode"
                                name="shippingPostalCode"
                                type="text"
                                pattern="[0-9]{6}"
                                class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                placeholder=" "
                                minlength="6"
                                maxlength="6"
                                required />
                            <label
                                for="shippingPostalCode"
                                class="absolute left-4 top-4 origin-[0] -translate-y-3 scale-75 cursor-text text-subtext1 duration-150 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-3 peer-focus:scale-75">
                                Postal Code
                            </label>
                        </div>
                        <div class="flex space-x-4">
                            <div class="relative w-full">
                                <select
                                    id="orderPaid"
                                    name="orderPaid"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled selected></option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="orderPaid"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Paid
                                </label>
                            </div>
                            <div class="relative w-full">
                                <select
                                    id="orderFulfilled"
                                    name="orderFulfilled"
                                    class="peer block w-full rounded-md bg-surface1 px-4 py-4 pb-2 pt-6 text-text"
                                    required>
                                    <option value="" disabled selected></option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                                <label
                                    for="orderFulfilled"
                                    class="absolute left-4 top-2 origin-[0] -translate-y-2 scale-75 text-subtext1 transition-all duration-150 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-2 peer-focus:scale-75 peer-focus:text-mauve">
                                    Fulfilled
                                </label>
                            </div>
                        </div>
                        <div class="flex space-x-4">
                            <button
                                type="button"
                                id="cancelOrder"
                                class="w-full rounded-md bg-peach px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Cancel Order
                            </button>
                            <button
                                id="saveOrder"
                                type="submit"
                                class="w-full rounded-md bg-mauve px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Save Changes
                            </button>
                            <button
                                type="button"
                                id="manageOrderCancel"
                                class="w-full rounded-md bg-red px-4 py-2 font-medium text-crust transition-opacity hover:opacity-80">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>
